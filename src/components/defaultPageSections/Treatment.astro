---
interface Props {
  headline: string;
  summary: string;
  cta: string;
  ctaurl: string;
  ctabuttonclass: string;
  ctabuttonclassMobile: string;
}

const props = Astro.props;
---

<div id="treatment" class="bg-gradient-to-b from-[#071633] via-[#0b2a40] to-[#071633] text-brand-secondary py-10">
  <div class="container">
    <p class="section-headline mt-10 mb-6">Relief Beyond Traditional Therapies</p>

    <div class="max-w-3xl mx-auto mb-4">
      <div class="relative rounded-xl overflow-hidden shadow-2xl bg-black aspect-[16/9]">
        <!-- Custom overlay thumbnail button -->
        <button
          id="treatment-video-play"
          type="button"
          aria-label="Play Video"
          class="group absolute inset-0 w-full h-full z-10 flex items-center justify-center transition bg-black/60 hover:bg-black/40"
          style="display: block;"
        >
          <img 
            src="/img/mastheadGradient1-bg.png" 
            class="object-cover w-full h-full absolute inset-0 group-hover:scale-105 transition duration-200" 
            style="z-index: 1;"
            alt="Video preview"
          />
          <!-- Play Icon -->
          <span class="relative z-20 flex items-center justify-center">
            <svg width="68" height="68" viewBox="0 0 68 68" fill="none">
              <circle cx="34" cy="34" r="34" fill="rgba(0,0,0,0.4)" />
              <polygon points="28,21 28,47 50,34" fill="#fff" />
            </svg>
          </span>
        </button>
        <video 
          id="treatment-video"
          class="w-full h-full object-cover"
          controls
          preload="metadata"
          playsinline
          style="display: none;"
          poster="/img/mastheadGradient1-bg.png" <!-- fallback only for non-js users -->
        >
          <source src="/videos/Robot_Steps.mp4" type="video/mp4" />
          Your browser does not support the video tag.
        </video>
      </div>
    </div>

    <p class="px-4 mt-10 mb-4 ml-4">
      Our patients often come to us after searching for relief for months or even years. They've tried injections, medication, exercise, massage, even surgery and are still dealing with pain.
    </p>
    <p class="px-4 mb-10 ml-4">
      We use the RX2600 Therapeutic Robot to apply precise static pressure in intervals to lengthen tight muscles. This helps relieve tension on the bone structure and reduces aches and pains.
    </p>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const playBtn = document.getElementById('treatment-video-play');
    const video = document.getElementById('treatment-video');
    playBtn?.addEventListener('click', function () {
      playBtn.style.display = 'none';
      video.style.display = 'block';
      if (video.paused) {
        video.play();
      }
    });
  });
</script>

<style>
  .aspect-\[16\/9\] {
    aspect-ratio: 16/9;
  }
  /* Video Player Styles */
  #treatment-video {
    object-fit: cover;
  }
  #treatment-video::-webkit-media-controls-enclosure {
    background: transparent;
  }
  #treatment-video::-webkit-media-controls-panel {
    background: rgba(0, 0, 0, 0.5);
  }
  #treatment-video::-webkit-media-controls {
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  #treatment-video:hover::-webkit-media-controls {
    opacity: 1;
  }
</style>
